/*
	Limit an element's height to fit on the screen, within the device's safe area insets (if applicable).
	
	Arguments:
		- $vertical-padding: the minimum amount of extra space that should be left around the element (only applied if it's greater than the top and bottom safe area insets combined, or if there are no safe area insets)
*/
@mixin fit-vertically-to-screen($vertical-padding: 0px) {
	max-height: calc(100vh - #{$vertical-padding});
	
	@supports(max-height: max(0px)) {
		max-height: calc(100vh - max(#{$vertical-padding}, (env(safe-area-inset-top) + env(safe-area-inset-bottom))));
	}
}

$max-textblock-width: 60rem;
$min-textblock-width: 20rem;

img {
	max-width: 100%;
	
	&:not([class]) {
		@include fit-vertically-to-screen(4.5rem);
	}
	
}

body {
	margin-left: 1ch;
	margin-right: 1ch;
	
	@media screen and (min-width: 60rem) {
		& {
			margin-left: 10%;
			margin-right: 10%;
		}
	}
}

.site-header {
	display: flex;
	justify-content: space-around;
	
	border-bottom: 0.5px solid gray;
	
	@media (prefers-color-scheme: dark) {
		background-color: rgba(128, 128, 128, 0.1);
		border-bottom-color: transparent;
	}
	
	max-width: $max-textblock-width;
	margin-left: auto;
	margin-right: auto;
	
	.site-title {
		padding: 0.75rem;
		
		@media screen and (min-width: $max-textblock-width) {
			& {
				padding: 1.5rem;
			}
		}
	}

}

article:not([class]) > *, section > * {
	max-width: $max-textblock-width;
	margin-left: auto;
	margin-right: auto;
}

article.thing {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
	align-items: flex-start;
	align-content: space-between;
	justify-content: center;
	
	& > section {
		flex-shrink: 1;
		flex-grow: 1;
		flex-basis: auto;
		width: 50%;
		max-width: $max-textblock-width;
		
		margin-top: 0px;
		margin-left: 1.5rem;
		margin-right: 1.5rem;
	}
	
	& > section.thing-readme {
		flex-grow: 2;
		min-width: $min-textblock-width;
		
		@media screen and (max-width: $min-textblock-width) {
			min-width: auto;
		}
	}
	
	& > section.thing-info {
		width: 33%;
	}
}